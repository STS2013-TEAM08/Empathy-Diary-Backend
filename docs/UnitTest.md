# 단위 테스트

## Models

[[Test Code](../backend/models/)]

모델에 대한 단위 테스트는 간단히 `static initiate`, `static associate` 메소드의 호출 여부만을 테스트한다. 그러므로 상세 문서는 기술하지 않는다.

## Middlewares

[[Test Code](../backend/middlewares/index.test.js)]

passport와 관련된 미들웨어만 존재한다. 이에 대한 단위 테스트는 간단히 로그인 중 로그인, 로그인 중 로그아웃, 로그아웃 후 로그인, 로그아웃 후 로그아웃에 대한 단위 테스트만 작성하였다. 그러므로 상세 문서는 기술하지 않는다.

## Controllers

### User Controller

[[Test Code](../backend/controllers/user.test.js)]

#### [u-01] 회원 정보 조회

본 섹션은 [u-01](./API.md#u-01-회원-정보-조회)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| u-01 | 회원 정보 조회 성공 | uut-01-1 | 상태 코드 200 응답 조건 |

#### [u-02] 회원 가입

본 섹션은 [u-02](./API.md#u-02-회원-가입)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| u-02 | 회원 가입 성공 | uut-02-1 | 상태 코드 200 응답 조건 |
| u-02 | 확인 비밀번호 불일치 | uut-02-2 | 상태 코드 400 응답 조건 |
| u-02 | ID 중복 | uut-02-3 | 상태 코드 409 응답 조건 |
| u-02 | 첫 번째 findOne 수행 중 에러 | uut-02-4 | 서버 에러 발생 조건 |

#### [u-03] 로그인

본 섹션은 [u-03](./API.md#u-03-로그인)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| u-03 | 로그인 성공 | uut-03-1 | 상태 코드 200 응답 조건 |
| u-03 | 로그인 에러 | uut-03-2 | 서버 에러 발생 조건 |
| u-03 | 사용자 정보 불일치 | uut-03-3 | 상태 코드 400 응답 조건 |
| u-03 | 인증 에러 | uut-03-4 | 서버 에러 발생 조건 |

#### [u-04] 회원 정보 수정

본 섹션은 [u-04](./API.md#u-04-회원-정보-수정)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| u-04 | 회원 정보 수정 성공 | uut-04-1 | 상태 코드 200 응답 조건 |
| u-04 | 새 비밀번호 해싱 중 에러 | uut-04-2 | 서버 에러 발생 조건 |
| u-04 | 현재 비밀번호 불일치 | uut-04-3 | 상태 코드 400 응답 조건 |
| u-04 | 변경될 정보 없음 | uut-04-4 | 상태 코드 400 응답 조건 |
| u-04 | 확인 비밀번호 불일치 | uut-04-5 | 상태 코드 400 응답 조건 |
| u-04 | 첫 번째 findOne 수행 중 에러 | uut-04-6 | 서버 에러 발생 조건 |
| u-04 | 요청 바디 데이터 존재 | uut-04-7 | 조회한 로우에 값 저장 연산 발생 조건 |
| u-04 | 요청 바디에 새로운 닉네임 없음 | uut-04-8 | 조회한 로우에 값을 저장하지 않는 조건 |
| u-04 | 요청 바디에 새로운 비밀번호 없음 | uut-04-9 | 조회한 로우에 값을 저장하지 않는 조건 |
| u-04 | 첫 번째 user.save 수행 중 에러 | uut-04-10 | 서버 에러 발생 조건 |

#### [u-05] 회원 탈퇴

본 섹션은 [u-05](./API.md#u-05-회원-탈퇴)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| u-05 | 회원 탈퇴 성공 | uut-05-1 | 상태 코드 200 응답 조건 |
| u-05 | 확인 메시지 불일치 | uut-05-2 | 상태 코드 400 응답 조건 |
| u-05 | 첫 번째 destroy 수행 중 에러 | uut-05-3 | 서버 에러 발생 조건 |

#### [u-06] 로그아웃

본 섹션은 [u-06](./API.md#u-06-로그아웃)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| u-06 | 로그아웃 성공 | uut-06-1 | 상태 코드 200 응답 조건 |

### Post Controller

[[Test Code](../backend/controllers/post.test.js)]

#### [p-01] 모든 일기 조회

본 섹션은 [p-01](./API.md#p-01-모든-일기-조회)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| p-01 | 사용자가 작성한 일기 없음 | put-01-1 | 빈 리스트 및 상태 코드 200 응답 조건 |
| p-01 | 첫 번째 findAll 수행 중 에러 | put-01-2 | 서버 에러 발생 조건 |
| p-01 | 첫 번째 getEmotion 수행 중 에러 | put-01-3 | 서버 에러 발생 조건 |
| p-01 | 첫 번째 getSentiment 수행 중 에러 | put-01-4 | 서버 에러 발생 조건 |
| p-01 | 모든 일기 조회 성공 | put-01-5 | 내용이 있는 리스트 및 상태 코드 200 응답 조건 |

#### [p-02] 특정 일기 조회

본 섹션은 [p-02](./API.md#p-02-특정-일기-조회)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| p-02 | 숫자가 아닌 쿼리 파라미터 전달 | put-02-1 | 다른 컨트롤러로 이동 |
| p-02 | 조회된 일기 없음 | put-02-2 | 상태 코드 404 응답 조건 |
| p-02 | 일기 작성자 불일치 | put-02-3 | 상태 코드 403 응답 조건 |
| p-02 | 첫 번째 findOne 수행 중 에러 | put-02-4 | 서버 에러 발생 조건 |
| p-02 | 첫 번째 getEmotions 수행 중 에러 | put-02-5 | 서버 에러 발생 조건 |
| p-02 | 첫 번째 getSentiment 수행 중 에러 | put-02-6 | 서버 에러 발생 조건 |
| p-02 | 특정 일기 조회 성공 | put-02-7 | 상태 코드 200 응답 조건 |

#### [p-03] 일기 등록

본 섹션은 [p-03](./API.md#p-03-일기-등록)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| p-03 | 일기 등록 성공 | put-03-1 | 상태 코드 200 응답 조건 |
| p-03 | 일기 내용 없음 | put-03-2 | 상태 코드 400 응답 조건 |
| p-03 | 첫 번째 create 수행 중 에러 | put-03-3 | 서버 에러 발생 조건 |
| p-03 | 두 번째 create 수행 중 에러 | put-03-4 | 서버 에러 발생 조건 |
| p-03 | 세 번째 create 수행 중 에러 | put-03-5 | 서버 에러 발생 조건 |

#### [p-04] 일기 내용 수정

본 섹션은 [p-04](./API.md#p-04-일기-내용-수정)에 대한 단위 테스트의 기술이다.

| API ID | Test Name | Test Case ID | Description |
| :-- | :-- | :--: | :-- |
| p-04 | 유효하지 않은 요청 바디 | put-04-1 | 상태 코드 400 응답 조건 |
| p-04 | 수정할 일기 내용 없음 | put-04-2 | 상태 코드 400 응답 조건 |
| p-04 | 첫 번째 findOne 수행 중 에러 | put-04-3 | 서버 에러 발생 조건 |
| p-04 | 조회된 일기 없음 | put-04-4 | 상태 코드 404 응답 조건 |
| p-04 | 작성자 불일치 | put-04-5 | 상태 코드 403 응답 조건 |
| p-04 | 첫 번째 save 수행 중 에러 | put-04-6 | 서버 에러 발생 조건 |
| p-04 | 첫 번째 destroy 수행 중 에러 | put-04-7 | 서버 에러 발생 조건 |
| p-04 | 두 번째 destroy 수행 중 에러 | put-04-8 | 서버 에러 발생 조건 |
| p-04 | 첫 번째 create 수행 중 에러 | put-04-9 | 서버 에러 발생 조건 |
| p-04 | 두 번째 create 수행 중 에러 | put-04-10 | 서버 에러 발생 조건 |
| p-04 | 일기 내용 수정 성공 | put-04-11 | 상태 코드 200 응답 조건 |
